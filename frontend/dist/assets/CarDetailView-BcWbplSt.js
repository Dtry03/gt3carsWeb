import{d as E,r as M,c as V,a as r,w as S,b as e,t as d,e as y,f as m,v as w,n as k,u as n,F as f,g as x,o as s,h as B,i as L,j as q,k as I,l as _}from"./index-TENmp7Rv.js";import{c as p,r as j,m as C,e as T,u as D,a as N}from"./index-Cwk1WsWt.js";const U={class:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-xl shadow-2xl p-8 w-full max-w-lg m-4","data-aos":"zoom-in"},z={key:0,class:"text-center text-white py-10"},H={key:1},R={class:"flex justify-between items-start mb-6"},A={class:"text-subtle mt-1"},F={class:"mb-5"},O={key:0,class:"mt-1 text-red-400 text-sm"},G={class:"mb-5"},K={key:0,class:"mt-1 text-red-400 text-sm"},P={class:"mb-5"},J={key:0,class:"mt-1 text-red-400 text-sm"},Q={class:"mb-5"},W={key:0,class:"mt-1 text-red-400 text-sm"},X=["disabled"],Y=E({__name:"ContactModal",props:{vehicle:{type:Object,required:!0}},emits:["close"],setup(h,{emit:c}){const $=h,b=c,u=M({nombre:"",correo:"",telefono:"",mensaje:`Hola, estoy interesado en el ${$.vehicle?.marca?.nombre} ${$.vehicle?.modelo} . Me gustaría recibir más información.`}),a=V(()=>({nombre:{required:p.withMessage("El nombre es obligatorio.",j),minLength:p.withMessage("El nombre debe tener al menos 3 caracteres.",C(3))},correo:{required:p.withMessage("El email es obligatorio.",j),email:p.withMessage("Introduce un formato de email válido.",T)},telefono:{required:p.withMessage("El teléfono es obligatorio.",j),minLength:p.withMessage("El teléfono debe tener al menos 9 dígitos.",C(9))},mensaje:{required:p.withMessage("El mensaje no puede estar vacío.",j)}})),l=D(a,u),v=M("idle");async function i(){if(l.value.$touch(),!l.value.$invalid){v.value="submitting";try{await N.sendMessage(u.value),v.value="success"}catch(g){console.error("Error al enviar la solicitud:",g),v.value="error"}}}return(g,t)=>(s(),r("div",{class:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",onClick:t[10]||(t[10]=S(o=>b("close"),["self"]))},[e("div",U,[v.value==="success"?(s(),r("div",z,[t[11]||(t[11]=e("h2",{class:"text-3xl font-bold text-primary mb-4"},"¡Mensaje Enviado!",-1)),t[12]||(t[12]=e("p",{class:"text-subtle text-lg"},"Gracias por tu interés. Nos pondremos en contacto contigo a la brevedad.",-1)),e("button",{onClick:t[0]||(t[0]=o=>b("close")),class:"mt-8 bg-primary text-white font-bold py-2 px-6 rounded-lg hover:bg-primary-dark transition-colors"}," Cerrar ")])):(s(),r("div",H,[e("div",R,[e("div",null,[t[13]||(t[13]=e("h2",{class:"text-2xl font-bold text-white"},"Solicitar Información",-1)),e("p",A,"Sobre: "+d(h.vehicle?.marca?.nombre)+" "+d(h.vehicle?.modelo),1)]),e("button",{onClick:t[1]||(t[1]=o=>b("close")),class:"text-gray-400 hover:text-white text-3xl"},"×")]),e("form",{onSubmit:S(i,["prevent"])},[e("div",F,[t[14]||(t[14]=e("label",{for:"modal-nombre",class:"block text-subtle font-semibold mb-2"},"Nombre Completo",-1)),y(e("input",{type:"text",id:"modal-nombre","onUpdate:modelValue":t[2]||(t[2]=o=>u.value.nombre=o),onBlur:t[3]||(t[3]=o=>n(l).nombre.$touch()),class:k([{"border-red-500":n(l).nombre.$error},"w-full bg-white/5 border border-white/20 rounded-lg py-3 px-4 text-light focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300"])},null,34),[[w,u.value.nombre]]),n(l).nombre.$error?(s(),r("div",O,[(s(!0),r(f,null,x(n(l).nombre.$errors,o=>(s(),r("p",{key:o.$uid},d(o.$message),1))),128))])):m("",!0)]),e("div",G,[t[15]||(t[15]=e("label",{for:"modal-correo",class:"block text-subtle font-semibold mb-2"},"Correo Electrónico",-1)),y(e("input",{type:"email",id:"modal-correo","onUpdate:modelValue":t[4]||(t[4]=o=>u.value.correo=o),onBlur:t[5]||(t[5]=o=>n(l).correo.$touch()),class:k([{"border-red-500":n(l).correo.$error},"w-full bg-white/5 border border-white/20 rounded-lg py-3 px-4 text-light focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300"])},null,34),[[w,u.value.correo]]),n(l).correo.$error?(s(),r("div",K,[(s(!0),r(f,null,x(n(l).correo.$errors,o=>(s(),r("p",{key:o.$uid},d(o.$message),1))),128))])):m("",!0)]),e("div",P,[t[16]||(t[16]=e("label",{for:"modal-telefono",class:"block text-subtle font-semibold mb-2"},"Teléfono",-1)),y(e("input",{type:"tel",id:"modal-telefono","onUpdate:modelValue":t[6]||(t[6]=o=>u.value.telefono=o),onBlur:t[7]||(t[7]=o=>n(l).telefono.$touch()),class:k([{"border-red-500":n(l).telefono.$error},"w-full bg-white/5 border border-white/20 rounded-lg py-3 px-4 text-light focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300"])},null,34),[[w,u.value.telefono]]),n(l).telefono.$error?(s(),r("div",J,[(s(!0),r(f,null,x(n(l).telefono.$errors,o=>(s(),r("p",{key:o.$uid},d(o.$message),1))),128))])):m("",!0)]),e("div",Q,[t[17]||(t[17]=e("label",{for:"modal-mensaje",class:"block text-subtle font-semibold mb-2"},"Mensaje",-1)),y(e("textarea",{id:"modal-mensaje","onUpdate:modelValue":t[8]||(t[8]=o=>u.value.mensaje=o),onBlur:t[9]||(t[9]=o=>n(l).mensaje.$touch()),class:k([{"border-red-500":n(l).mensaje.$error},"w-full bg-white/5 border border-white/20 rounded-lg py-3 px-4 text-light focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300"]),rows:"4"},null,34),[[w,u.value.mensaje]]),n(l).mensaje.$error?(s(),r("div",W,[(s(!0),r(f,null,x(n(l).mensaje.$errors,o=>(s(),r("p",{key:o.$uid},d(o.$message),1))),128))])):m("",!0)]),e("button",{type:"submit",disabled:v.value==="submitting",class:"w-full bg-primary text-white font-bold py-3 px-6 rounded-lg hover:bg-primary-dark transition-colors duration-300 disabled:opacity-50 shadow-lg hover:shadow-primary/50"},d(v.value==="submitting"?"Enviando...":"Enviar Solicitud"),9,X)],32)]))])]))}}),Z={class:"container mx-auto px-6 py-12"},ee={key:0,class:"text-center py-20"},te={key:1,class:"text-center py-20"},oe={class:"text-2xl font-bold text-red-600"},se={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-12 items-start"},re={class:"mb-4 rounded-lg overflow-hidden shadow-lg"},le=["src"],ne={class:"grid grid-cols-4 gap-2"},ie=["src"],ae={class:"p-4"},de={class:"text-4xl md:text-5xl font-extrabold text-light"},ue={class:"text-4xl font-black text-red-600 mt-4 mb-6"},me={class:"grid grid-cols-2 gap-4 border-y border-gray-200 py-4"},ce={class:"capitalize"},be={class:"prose max-w-none mt-6 text-light"},ve=["innerHTML"],fe=E({__name:"CarDetailView",setup(h){const c=B(),$=L(),b=M(!1),u=$.params.id;q(()=>{c.fetchVehicleById(u)});const a=V(()=>c.vehicle);console.log("Datos del vehículo en la vista de detalle:",a.value);const l="http://localhost:1337";return(v,i)=>(s(),r("div",Z,[n(c).loading?(s(),r("div",ee,[...i[2]||(i[2]=[e("p",{class:"text-2xl font-semibold"},"Cargando detalles del vehículo...",-1)])])):n(c).error?(s(),r("div",te,[e("p",oe,d(n(c).error),1)])):m("",!0),a.value?(s(),r("div",se,[e("div",null,[e("div",re,[a.value.imagenes?.[0]?.url?(s(),r("img",{key:0,src:`${n(l)}${a.value.imagenes[0].url}`,class:"w-full h-auto object-cover"},null,8,le)):m("",!0)]),e("div",ne,[(s(!0),r(f,null,x(a.value.imagenes,g=>(s(),r("div",{key:g.id,class:"rounded overflow-hidden border-2 border-transparent hover:border-red-600 cursor-pointer"},[e("img",{src:`${n(l)}${g.formats.thumbnail.url}`,class:"w-full h-full object-cover"},null,8,ie)]))),128))])]),e("div",ae,[e("h1",de,d(a.value.marca?.nombre)+" "+d(a.value.modelo),1),e("p",ue,d((a.value.precio||0).toLocaleString("es-ES"))+" € ",1),e("div",me,[e("div",null,[i[3]||(i[3]=e("span",{class:"font-bold text-light"},"Año:",-1)),_(" "+d(a.value.ano),1)]),e("div",null,[i[4]||(i[4]=e("span",{class:"font-bold text-light"},"Kilometraje:",-1)),_(" "+d((a.value.kilometraje||0).toLocaleString("es-ES"))+" km",1)]),e("div",null,[i[5]||(i[5]=e("span",{class:"font-bold text-light"},"Estado:",-1)),i[6]||(i[6]=_()),e("span",ce,d(a.value.estado),1)])]),e("div",be,[i[7]||(i[7]=e("h3",{class:"text-xl font-bold mb-2"},"Descripción",-1)),e("div",{innerHTML:a.value.descripcion},null,8,ve)]),e("button",{onClick:i[0]||(i[0]=g=>b.value=!0),class:"mt-8 w-full bg-red-600 text-white text-lg font-bold py-4 rounded-lg hover:bg-red-800 transition-colors duration-300"}," Solicitar Información ")])])):m("",!0),b.value?(s(),I(Y,{key:3,vehicle:a.value,onClose:i[1]||(i[1]=g=>b.value=!1)},null,8,["vehicle"])):m("",!0)]))}});export{fe as default};
